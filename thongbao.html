<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Th√¥ng b√°o ch√†o nƒÉm 2026</title>
<style>
  body {
    background: radial-gradient(circle at center, #dd97df, #1c2541);
    color: #fcfcfc;
    font-family: 'Segoe UI', sans-serif;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 30px;
    overflow: hidden;
  }

  #message {
    font-size: 1.8rem;
    line-height: 1.6;
    max-width: 800px;
    border-right: 2px solid #ff3030;
    white-space: pre-wrap;
    overflow: hidden;
    animation: blink 0.7s infinite;
  }

  @keyframes blink {
    50% { border-color: transparent; }
  }

  .fadeout {
    opacity: 0;
    transition: opacity 1.5s ease;
  }
</style>
</head>
<body>
  <div id="message"></div>

<script>
const text = "V·ª´a r·ªìi l√† m√†n ph√°o hoa ch√†o m·ª´ng nƒÉm 2026!\nC√≤n gi·ªù th√¨ c√πng h√°i l·ªôc v·ªõi Th·∫ø Ph∆∞∆°ng ƒë·ªÉ nh·∫≠n nh·ªØng phong bao l√¨ x√¨ n√†o ";
const messageEl = document.getElementById("message");
let index = 0;
let buffer = "";

// üé§ H√†m ƒë·ªçc an to√†n, kh√¥ng b·ªã ngh·∫πn
function speakNow(str) {
  if (!("speechSynthesis" in window)) return;
  speechSynthesis.cancel(); // h·ªßy l·ªùi c≈©
  const utter = new SpeechSynthesisUtterance(str);
  utter.lang = "vi-VN";
  utter.rate = 1.25;
  utter.pitch = 1.1;
  speechSynthesis.speak(utter);
}

// ‚åõ Debounce (ch·ªâ ƒë·ªçc sau khi ng·ª´ng g√µ 200ms)
let readTimeout;
function queueSpeak() {
  clearTimeout(readTimeout);
  readTimeout = setTimeout(() => {
    speakNow(buffer);
  }, 200);
}

// üéπ Hi·ªáu ·ª©ng g√µ + ƒë·ªçc theo
function typeEffect() {
  if (index < text.length) {
    const char = text[index];
    messageEl.textContent += char;
    buffer += char;
    index++;

    // G·ªçi ƒë·ªçc theo nh·ªãp, tr√°nh b·ªã ƒë·ª©t
    queueSpeak();

    setTimeout(typeEffect, 55);
  } else {
    // ƒê·ªçc ph·∫ßn c√≤n l·∫°i n·∫øu c√≥
    if (buffer.trim()) speakNow(buffer);

    // K·∫øt th√∫c: l√†m m·ªù v√† chuy·ªÉn trang
    setTimeout(() => {
      messageEl.classList.add("fadeout");
      setTimeout(() => {
        window.location.href = "hailoc.html";
      }, 2000);
    }, 5000);
  }
}

typeEffect();
</script>
</body>
</html>
