<!DOCTYPE html>
<html>
    <head>
        <title>CountDown</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/css?family=Baloo+Bhai&display=swap" rel="stylesheet">
        <style>
           body {
    background-image: url("../imgs/img-tet5.jpg");
    background-size: cover; 
}

.contain-tree-flower {
    opacity: 0;
}

.contain-tree-flower .tree-flower {
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: 3;
}

.contain-tree-flower:nth-child(1) {
    position: fixed;
    width: 30%;
    height: 60%;
    z-index: 9;
    top: 0px;
    left: -30%;
}
.contain-tree-flower:nth-child(2) {
    position: fixed;
    bottom: 10px;
    right: -30%;
    width: 28%;
    height: 65%;
    z-index: 8;
}

.lentern {
    position: absolute;
    z-index: 10;
    opacity: 1;
    transition: 4s;
    transform: rotate(-45deg);
}
.contain-tree-flower:nth-child(1) > .lentern:nth-child(2) {
    width: 10%;
    height: 30%;
    top: -50%;
    left: -50%;
}
.contain-tree-flower:nth-child(1) > .lentern:nth-child(3) {
    width: 15%;
    height: 25%;
    top: -50%;
    left: -50%;
}
.contain-tree-flower:nth-child(1) > .lentern:nth-child(4) {
    width: 10%;
    height: 36%;
    top: -50%;
    left: -50%;
}
.contain-tree-flower:nth-child(2) > .lentern:nth-child(2) {
    width: 11%;
    height: 30%;
    top: -150%;
    left: -250%;
}
.contain-tree-flower:nth-child(2) > .lentern:nth-child(3) {
    width: 17%;
    height: 23%;
    top: -150%;
    left: -250%;
}
.contain-tree-flower:nth-child(2) > .lentern:nth-child(4) {
    width: 10%;
    height: 33%;
    top: -150%;
    left: -250%;
}


.sky {
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0px;
    box-shadow: inset 0px 0px 150px rgb(0, 0, 0);
    z-index: 10;
    display: none;
}

.family {
    position: fixed;
    opacity: 0;
    transition: 3s;
    
}
.family:nth-child(4) {
    left: 2.5%;
    bottom: 5px;
    width: 30%;
    height: 40%;
}
.family:nth-child(5) {
    left: 45%;
    bottom: 30px;
    width: 20%;
    height: 35%;
}
@keyframes animationTopDownTextTet {
    to {
        top: -12%;
    }
}
@keyframes animationTopDownNumber2020 {
    to {
        top: -11%;
    }
}
@keyframes animationTopDownSlogan {
    to {
        top: -15%;
    }
}
.textTet {
    position: fixed;
    top: -7%;
    width: 9%;
    height: 32%;
    left: 26%;
    z-index: 11;
    -webkit-animation: animationTopDownTextTet  1s linear 2.5s infinite alternate;
    -moz-animation: animationTopDownTextTet  1s linear 2.5s infinite alternate;
    opacity: 0;
}
.number {
    position: fixed;
    top: -8%;
    z-index: 11;
    opacity: 0;
}
.number:nth-child(7) {
    left: 30%;
    -webkit-animation: animationTopDownNumber2020 1.2s ease-in-out 2.8s infinite alternate;
    -moz-animation: animationTopDownNumber2020 1.2s ease-in-out 2.8s infinite alternate;
}
.number:nth-child(8) {
    left: 35%;
    -webkit-animation: animationTopDownNumber2020 1.2s ease-in-out 3.1s infinite alternate;
    -moz-animation: animationTopDownNumber2020 1.2s ease-in-out 3.1s infinite alternate;
}
.number:nth-child(9) {
    left: 40%;
    -webkit-animation: animationTopDownNumber2020 1.2s ease-in-out 3.4s infinite alternate;
    -moz-animation: animationTopDownNumber2020 1.2s ease-in-out 3.4s infinite alternate;
}
.number:nth-child(10) {
    left: 45%;
    -webkit-animation: animationTopDownNumber2020 1.2s ease-in-out 3.7s infinite alternate;
    -moz-animation: animationTopDownNumber2020 1.2s ease-in-out 3.7s infinite alternate;
}
.slogan {
    position: fixed;
    top: -10%;
    width: 10%;
    height: 33%;
    left: 55%;
    z-index: 11;
    -webkit-animation: animationTopDownSlogan 1.2s ease-in-out 3.9s infinite alternate;
    -moz-animation: animationTopDownSlogan 1.2s ease-in-out 3.9s infinite alternate;
    opacity: 0;
}
/* khung ch·ªØ */
.clock {
    width: 0px;
    height: 0px;
    top: 25%;
    left: 25%;
    font-family: 'Baloo Bhai', 'Arial';
    text-align: center;
    color: #a33;
    font-size: 1.3rem;
    font-weight: bold;
    border-style: solid;
    border-width: 1.5px;
    border-color: rgba(212, 144, 61, 0.432);
    border-radius: 10px;
    background-color: rgba(255, 255, 255, 0.199);
    position: fixed;
}


@media only screen and (max-width: 414px) {
    .flower:nth-child(1) {
        width: 55%;
        height: 40%;
    }
    .flower:nth-child(2) {
        width: 55%;
        height: 45%;
    }
    .contain-tree-flower:nth-child(1) {
        width: 45%;
        height: 27%;
        top: 15%;
    }
    .contain-tree-flower:nth-child(2) {
        width: 43%;
        height: 30%;
        top: 60%;
    }
    .family:nth-child(4) {
        height: 30%;
        width: 50%;
        bottom: 0px;
    }
    .family:nth-child(5) {
        height: 25%;
        width: 45%;
        left: 60%;
        bottom: 0px;
    }
    @keyframes animationTopDownTextTet {
        to {
            top: -5%;
        }
    }
    @keyframes animationTopDownNumber2020 {
        to {
            top: -11%;
        }
    }
    @keyframes animationTopDownSlogan {
        to {
            top: -9%;
        }
    }
    .textTet {
        width: 20%;
        height: 20%;
        left: 5%;
    }
    .number {
        position: fixed;
        top: -8%;
        z-index: 11;
        width: 15%;
        height: 23%;
    }
    .number:nth-child(7) {
        left: 26%;
    }
    .number:nth-child(8) {
        left: 37%;
    }
    .number:nth-child(9) {
        left: 47%;
    }
    .number:nth-child(10) {
        left: 57%;
    }
    .slogan {
        left: 70%;
        height: 20%;
        width: 22%;
    }
    .clock {
        top: 35%;
        left: 2%;
        
    }
} 
* {
    margin: 0px;
    padding: 0px;
}

.clock .viewTime {
    width: 90%;
    height: 50%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    margin: 55px auto;
}
        </style>
    </head>
    <body>
        <!-- <div class="background-website"></div> -->
        <div class="contain-tree-flower">
            <img class="tree-flower" src="imgs/hoa-dao2.png" />
            <img class="lentern" src="imgs/long-den2.png" />
            <img class="lentern" src="imgs/long-den3.png" />
            <img class="lentern" src="imgs/long-den4.png" />
        </div>
        <div class="contain-tree-flower">
            <img class="tree-flower" src="imgs/hoa-mai.png" />
            <img class="lentern" src="imgs/long-den2.png" />
            <img class="lentern" src="imgs/long-den3.png" />
            <img class="lentern" src="imgs/long-den4.png" />
        </div>
        <div class="sky"></div>
        <img class="family" src="imgs/family.png" />
        <img class="family" src="imgs/family-goi-banh.png" />
        <img class="textTet" src="imgs/tet.png" />
        <img class="number" src="imgs/2_1.png" />
        <img class="number" src="imgs/0_1.png" />
        <img class="number" src="imgs/2_2.png" />
        <img class="number" src="imgs/0_2.png" />
        <img class="slogan" src="imgs/slogan.png" />
        <div class="clock">
          <h2>NGUY·ªÑN TH·∫æ PH∆Ø∆†NG</h2>
  <p>Li√™n h·ªá: <a href="https://www.facebook.com/nguyen.the.phuong.802142">Nguy·ªÖn Th·∫ø Ph∆∞∆°ng</a> - Zalo: 0325998623</p>
  <p>ƒê·ªÉ nh·∫≠n l√¨ x√¨</p>
  <h3>L∆∞u √Ω:Ch·ª•p ·∫£nh m√†n h√¨nh khi m·ªü l√¨ x√¨ </h3>

                </div>
            </div>
        </div>
       <audio id="tetMusic"
       src="https://ia800606.us.archive.org/27/items/tet-dong-day-khoa-tet-viet-nct-choice-v.-a-playlist-nhac-cua-tui/T%E1%BA%BFt%20%C4%90ong%20%C4%90%E1%BA%A7y%20-%20KHOA%20-%20T%E1%BA%BFt%20Vi%E1%BB%87t-%20NCT%20Choice%20-%20V.A%20-%20Playlist%20NhacCuaTui.mp3"
       autoplay
       loop
       muted>
       </audio>
       <script>
window.addEventListener('load', () => {
  const music = document.getElementById('tetMusic');
  music.volume = 0; // b·∫Øt ƒë·∫ßu nh·ªè ti·∫øng
  music.play().then(() => {
    console.log("üéµ Nh·∫°c T·∫øt ƒëang ph√°t (ban ƒë·∫ßu t·∫Øt ti·∫øng)");
    // sau 1s b·ªè mute
    setTimeout(() => {
      music.muted = false;
      // TƒÉng d·∫ßn √¢m l∆∞·ª£ng √™m √°i trong 3 gi√¢y
      let vol = 0;
      const fade = setInterval(() => {
        if (vol < 1) {
          vol += 0.05;
          music.volume = vol;
        } else {
          clearInterval(fade);
        }
      }, 150); // tƒÉng m·ªói 150ms
    }, 1000);
  }).catch(err => {
    console.log("‚ö†Ô∏è Autoplay b·ªã ch·∫∑n:", err);
    // N·∫øu b·ªã ch·∫∑n, ch·ªù ng∆∞·ªùi d√πng click
    const enableMusic = () => {
      music.muted = false;
      music.volume = 1;
      music.play();
      document.removeEventListener('click', enableMusic);
    };
    document.addEventListener('click', enableMusic);
  });
});
</script>
<!-- üí• Hi·ªáu ·ª©ng l√¨ x√¨ r∆°i -->
<style>
  .lixi {
    position: fixed !important;
    top: -100px;
    width: 80px;
    height: 100px;
    background-image: url("imgs/lixi.png"); /* ·∫¢nh bao l√¨ x√¨ PNG */
    background-size: contain;
    background-repeat: no-repeat;
    cursor: pointer;
    animation: fall linear forwards;
    z-index: 12 !important; /* MAX z-index ƒë·ªÉ lu√¥n n·ªïi l√™n tr√™n */
    pointer-events: auto;
  }

  @keyframes fall {
    0% {
      transform: translateY(-120px) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(110vh) rotate(360deg);
      opacity: 0.8;
    }
  }

  /* Popup th√¥ng b√°o s·ªë ti·ªÅn */
  .popup {
    position: fixed !important;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255,255,255,0.95);
    border-radius: 15px;
    box-shadow: 0 0 25px rgba(0,0,0,0.4);
    padding: 30px 50px;
    font-size: 28px;
    color: #b30000;
    font-weight: bold;
    display: none;
    z-index: 2147483647 !important;
  }

  .popup.show {
    display: block;
    animation: popupScale 0.3s ease;
  }

  @keyframes popupScale {
    from { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
    to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  }
</style>

<div class="popup" id="popup"></div>

<script>
  // üßÆ C·∫•u h√¨nh gi·∫£i th∆∞·ªüng v√† s·ªë l∆∞·ª£ng m·ªói lo·∫°i
  const rewardConfig = [
    { amount: 50000, maxCount: 1 },
    { amount: 20000, maxCount: 3 },
    { amount: 10000, maxCount: 4 },
    { amount: 5000,  maxCount: 20 },
    { amount: 2000,  maxCount: 25 }
  ];

  // üéØ Gi·ªõi h·∫°n t·ªïng ph·∫ßn th∆∞·ªüng
  const MAX_TOTAL = 300000;

  // üì¶ L∆∞u d·ªØ li·ªáu ph√°t th∆∞·ªüng v√†o localStorage ƒë·ªÉ kh√¥ng reset khi reload
  let rewardsData = JSON.parse(localStorage.getItem("lixiRewardsData")) || {
    totalGiven: 0,
    counts: {}, // s·ªë l·∫ßn m·ªói m·ªánh gi√° ƒë√£ ph√°t
  };

  // üßß Ki·ªÉm tra xem ng∆∞·ªùi d√πng ƒë√£ m·ªü l√¨ x√¨ ch∆∞a
  let hasOpenedLixi = localStorage.getItem("hasOpenedLixi") === "true";

  // üíæ ƒê·ªçc l·∫°i s·ªë ti·ªÅn ng∆∞·ªùi d√πng ƒë√£ nh·∫≠n l·∫ßn ƒë·∫ßu (n·∫øu c√≥)
  let userReward = localStorage.getItem("userReward");

  // üé≤ Ch·ªçn ph·∫ßn th∆∞·ªüng kh·∫£ d·ª•ng ng·∫´u nhi√™n theo t·ªâ l·ªá gi·∫£m d·∫ßn
  function getAvailableReward() {
    const available = rewardConfig.filter(r => {
      const given = rewardsData.counts[r.amount] || 0;
      return given < r.maxCount;
    });

    if (available.length === 0) return null;

    const weights = available.map(r => 1 / (r.amount / 1000));
    const totalWeight = weights.reduce((a, b) => a + b, 0);
    let rand = Math.random() * totalWeight;

    for (let i = 0; i < available.length; i++) {
      if (rand < weights[i]) return available[i];
      rand -= weights[i];
    }

    return available[0];
  }

  // üåßÔ∏è T·∫°o l√¨ x√¨ r∆°i
  function createLixi() {
    const lixi = document.createElement("div");
    lixi.classList.add("lixi");
    lixi.style.left = Math.random() * (window.innerWidth - 70) + "px";
    const duration = Math.random() * 3 + 4;
    lixi.style.animationDuration = duration + "s";

    lixi.addEventListener("click", (e) => {
      e.stopPropagation();

      // ‚ùó N·∫øu ng∆∞·ªùi n√†y ƒë√£ m·ªü, hi·ªán l·∫°i s·ªë ti·ªÅn l·∫ßn ƒë·∫ßu
      if (hasOpenedLixi) {
        if (userReward) {
          showPopup(`üòÖ B·∫°n ch·ªâ ƒë∆∞·ª£c m·ªü 1 l√¨ x√¨ th√¥i nha! S·ªë ti·ªÅn b·∫°n nh·∫≠n ƒë∆∞·ª£c l√† ${Number(userReward).toLocaleString()}ƒë`);
        } else {
          showPopup("üòÖ B·∫°n ch·ªâ ƒë∆∞·ª£c m·ªü 1 l√¨ x√¨ th√¥i nha!");
        }
        return;
      }

      // ‚ùå N·∫øu ƒë√£ ƒë·∫°t gi·ªõi h·∫°n t·ªïng ph·∫ßn th∆∞·ªüng
      if (rewardsData.totalGiven >= MAX_TOTAL) {
        showPopup("üéÅ Ph·∫ßn qu√† ƒë√£ ƒë·∫°t gi·ªõi h·∫°n h√¥m nay!");
        return;
      }

      // ‚ùì H·ªèi x√°c nh·∫≠n
      const confirmOpen = confirm("üßß B·∫°n c√≥ ch·∫Øc mu·ªën m·ªü l√¨ x√¨ n√†y kh√¥ng?");
      if (!confirmOpen) return;

      const reward = getAvailableReward();
      if (!reward) {
        showPopup("üéÅ Ph·∫ßn qu√† h√¥m nay ƒë√£ h·∫øt!");
        return;
      }

      // ‚úÖ C·∫≠p nh·∫≠t d·ªØ li·ªáu ph√°t th∆∞·ªüng
      rewardsData.totalGiven += reward.amount;
      rewardsData.counts[reward.amount] = (rewardsData.counts[reward.amount] || 0) + 1;
      localStorage.setItem("lixiRewardsData", JSON.stringify(rewardsData));

      // üßß L∆∞u th√¥ng tin ng∆∞·ªùi d√πng ƒë√£ m·ªü v√† s·ªë ti·ªÅn nh·∫≠n ƒë∆∞·ª£c
      hasOpenedLixi = true;
      userReward = reward.amount;
      localStorage.setItem("hasOpenedLixi", "true");
      localStorage.setItem("userReward", reward.amount);

      // üí∞ Hi·ªán k·∫øt qu·∫£
      showPopup(`üí∞ B·∫°n nh·∫≠n ƒë∆∞·ª£c ${reward.amount.toLocaleString()}ƒë!`);
      lixi.remove();
    });

    document.body.appendChild(lixi);
    setTimeout(() => lixi.remove(), duration * 1000);
  }

  // üì¢ Hi·ªÉn th·ªã popup th√¥ng b√°o
  function showPopup(text) {
    const popup = document.getElementById("popup");
    popup.textContent = text;
    popup.classList.add("show");
    setTimeout(() => popup.classList.remove("show"), 5000);
  }

  // ‚òî M∆∞a l√¨ x√¨ r∆°i ng·∫´u nhi√™n
  setInterval(createLixi, 800);
</script>



    </body>
    <script src="js/displayAll.js"></script>
    <script src="js/objectFly/configFly.js"></script>
    <script src="js/configClock/displayClock.js"></script>
    <script src="js/objectFly/flowerFly.js"></script>
    <script src="js/objectFly/lenternFly.js"></script>
   
</html>